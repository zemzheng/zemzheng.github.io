<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>other | Ziey</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.4">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../shell/index.html" />
    
    
    <link rel="prev" href="../../javascript/functions/image.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="1.1.3"
        data-chapter-title="other"
        data-filepath="javascript/functions/other.md"
        data-basepath="../.."
        data-revision="Thu Dec 03 2015 16:56:54 GMT+0800 (中国标准时间)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="javascript/index.html">
            
                
                    <a href="../../javascript/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        javascript
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="javascript/functions/index.html">
            
                
                    <a href="../../javascript/functions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        functions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="javascript/functions/string.html">
            
                
                    <a href="../../javascript/functions/string.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.1.</b>
                        
                        string
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="javascript/functions/image.html">
            
                
                    <a href="../../javascript/functions/image.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.2.</b>
                        
                        image
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="1.1.3" data-path="javascript/functions/other.html">
            
                
                    <a href="../../javascript/functions/other.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.3.</b>
                        
                        other
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="shell/index.html">
            
                
                    <a href="../../shell/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        shell
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="shell/echo.html">
            
                
                    <a href="../../shell/echo.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        echo
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="shell/date.html">
            
                
                    <a href="../../shell/date.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        date
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="vim/index.html">
            
                
                    <a href="../../vim/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        vim
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="git/index.html">
            
                
                    <a href="../../git/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        git
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="git/diff-with-svn.html">
            
                
                    <a href="../../git/diff-with-svn.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        diff with svn
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="http/index.html">
            
                
                    <a href="../../http/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        http
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="http/status.html">
            
                
                    <a href="../../http/status.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        status
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="css/index.html">
            
                
                    <a href="../../css/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        css
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="css/center.html">
            
                
                    <a href="../../css/center.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        居中
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="skill/index.html">
            
                
                    <a href="../../skill/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        skill
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Ziey</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="&#x5176;&#x4ED6;&#x672A;&#x88AB;&#x5F52;&#x7C7B;&#x7684;&#x529F;&#x80FD;">&#x5176;&#x4ED6;&#x672A;&#x88AB;&#x5F52;&#x7C7B;&#x7684;&#x529F;&#x80FD;</h1>
<h2 id="&#x6269;&#x5C55;-jquery-hashchange-&#x63D2;&#x4EF6;">&#x6269;&#x5C55; jQuery hashchange &#x63D2;&#x4EF6;</h2>
<pre><code>/**
 * @author Zem Zheng (zemzheng@gmail.com)
 * @desciption Extension for hashchange event, baseon jQuery. 
 * &lt;pre&gt;
 *   // you can import &lt;jq.hashchangefix.js&gt; here
 *   // https://gist.github.com/zemzheng/8574216
 *   
 *   //Useage:
 *   $( window ).on(
 *       &apos;hashchange::all&apos; || &apos;hashchange::path&apos; || &apos;hashchange::param&apos;,
 *       function(e, path, params, hash){ 
 *          // your code here 
 *       }
 *   );
 *
 *   $.zHashExtension.getData()            // current hash data
 *   $.zHashExtension.getData( isOld = 1 ) // last hash data
 *   $.zHashExtension.setHash(
 *      {
 *          path : &apos;path/&apos;
 *          data :
 *      }
 *   )
 *
 *   
 *   Effect when hash change:
 *    Name
 *      #&lt;path&gt;#&lt;params&gt;
 *      * &lt;params&gt; = &lt;key&gt;=&lt;val&gt;&amp;&lt;key2&gt;=&lt;val2&gt;...
 *      RegExp : # [^#]+ #{0,1} ( [^=&amp;]+=[^=&amp;]+&amp;{0,1} )*
 *   
 *    Events:
 *      hashchange::path 
 *          #&lt;path&gt;#&lt;params&gt;  ==&gt; #&lt;path2&gt;#&lt;params&gt;
 *      hashchange::param
 *          #&lt;path&gt;#&lt;params&gt;  ==&gt; #&lt;path&gt;#&lt;params2&gt;
 *   
 *    Example:
 *        #Hello#a=1
 *        #Hello/Zem#a=1&amp;b=2&amp;c=3
 *        #Hey/Zem#code=100
 * &lt;/pre&gt;
 */
(function( $ ){
    var jQ_Namespace = &apos;zHashExtension&apos;,
        Evt_prefix   = &apos;hashchange::&apos;;

    var $win = $( window ),
        decodeUrl = decodeURIComponent,
        encodeUrl = encodeURIComponent,

        /* ==&gt;
         * [ 
         *    &apos;hashchange::path&apos;, 
         *    &apos;hashchange::param&apos;, 
         *    &apos;hashchange::all&apos;
         * ]
         */
        _EventsMap = &apos;%spath,%sparam,%sall&apos;
            .replace( /%s/g, Evt_prefix )
            .split( &apos;,&apos; ),

        globalHashchange = &apos;hashchange.&apos; + jQ_Namespace,

        _setHash = function( opts ){
            if( !( opts.path || opts.data ) ) return false;
            var path = opts.path || _now_hashdata[ 0 ],
                params = [],
                key,
                data = ( path === _now_hashdata[ 0 ] ) 
                            // &#x8DEF;&#x5F84;&#x4E0D;&#x53D8;&#xFF0C;&#x6309;&#x8BBE;&#x7F6E;&#x8986;&#x76D6;
                            ? $.extend( {}, _now_hashdata[ 1 ], opts.data ) 
                            // &#x8DEF;&#x5F84;&#x53D8;&#x5316;&#xFF0C;&#x5168;&#x90E8;&#x542F;&#x7528;&#x65B0;&#x7684;&#x8DEF;&#x5F84;
                            : opts.data,
                result;

            for( key in data ){
                params.push(
                    encodeUrl( key ) + &apos;=&apos; + encodeUrl( data[ key ] )
                );
            }

            result = &apos;#&apos; + path + &apos;#&apos; + params.join( &apos;&amp;&apos; );

            // &#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x5199;&#x4E3A;&#x4E86;&#x9A6C;&#x4E0A;&#x751F;&#x6548;&#xFF0C;&#x4F46;&#x662F;&#x5BFC;&#x81F4; hash &#x5931;&#x6548;
            // _old_hashdata = _now_hashdata;
            // _now_hashdata =_adaper( result );
            // &#x4E0B;&#x9762;&#x8BBE;&#x7F6E;hash&#x4E4B;&#x540E;&#x89E6;&#x53D1;&#x4E86;&#x4E8B;&#x4EF6;&#xFF0C;&#x7B49;&#x4E8E;&#x4E24;&#x6B21;&#x89E6;&#x53D1;&#x540C;&#x4E00;&#x4E2A;&#x65B0;hash
            return location.hash = result;
        },

        _getData = function( old ){
            return old ? _old_hashdata : _now_hashdata; 
        },

        _offAll = function(){
            var ii = _EventsMap.length;
            while( ii-- ){
                $win.off( _EventsMap[ ii ] );
            }
        },

        _adaper = function( hash ){

            var val  = {},
                path = hash
                        .replace(/^#[\/]*/,&apos;&apos;)
                        .replace(/\/*#(.+)$/ /**/,function( m, str ){
                            str.replace(/([^&amp;]+)=([^&amp;]+)/g, function(m, k, v){
                                val[ decodeUrl( k ) ] = decodeUrl( v );
                            });
                            return &apos;&apos;;
                        })
                        .replace( /#$/, &apos;&apos; );
            return [ path, val, hash ];
        },
        isEqual = function( a, b ){
            if( &apos;string&apos; === typeof a ) return a === b;
            var key;
            for( key in a ){                
                if( !b || !isEqual( a[key], b[key]) ) return 0;
            }
            return 1;
        },
        _old_hashdata,
        _now_hashdata = _adaper( location.hash );

    var specialHash = {},
        runSpecialHandle = function( hash, type ){
            var hash_str = hash[ type ] &amp;&amp; hash[ type ][ 2 ],
                hash_obj = specialHash[ hash_str ],
                handle   = hash_obj &amp;&amp; hash_obj[ type ];
            return ( &apos;function&apos; === typeof handle ) &amp;&amp; handle();
        };
    $win.off( globalHashchange ).on( globalHashchange, function( e ){
        var hash = {
                to   : _adaper( location.hash ),
                from : _now_hashdata
            };
        if( ( runSpecialHandle( hash, &apos;from&apos; ) ) ) return;
        if( ( runSpecialHandle( hash, &apos;to&apos;   ) ) ) return;

        if( false === ( ( &apos;function&apos; === typeof _.hook_beforeAll ) &amp;&amp; _.hook_beforeAll( hash ) ) ) return;

        var tmp      = _old_hashdata = _now_hashdata,
            hashdata = _now_hashdata = hash.to;

        var i = 0,
            ii = _EventsMap.length,// - 1,
            trigger = function(){ $win.trigger( _EventsMap[ i ], hashdata ) };
        while( i &lt; ii ){
            isEqual( hashdata[ i ], tmp[ i ] ) || trigger();
            i++;
        }
        ( &apos;function&apos; === typeof _.hook_afterAll ) &amp;&amp; _.hook_afterAll( hash );
        // trigger();
    } );
    // &#x5176;&#x5B9E;&#x6CA1;&#x6709;&#x5FC5;&#x8981;&#x89E6;&#x53D1;&#xFF0C;&#x5728;&#x8FD9;&#x4E4B;&#x524D;&#x5E94;&#x8BE5;&#x8FD8;&#x6CA1;&#x6709;&#x7ED1;&#x5B9A;&#x4E8B;&#x4EF6;?
    //.trigger( globalHashchange );

    var _ = $[ jQ_Namespace ] = {
        reset   : function(){
            _old_hashdata = _now_hashdata = &apos;&apos;;
            $win.trigger( globalHashchange );
        },
        setHash : _setHash,
        getData : _getData,
        getHash : _getData,
        offAll  : _offAll,
        setSpecial : function( data ){
            $.extend( specialHash, data );
        }
    };
})( jQuery );
</code></pre>
                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../javascript/functions/image.html" class="navigation navigation-prev " aria-label="Previous page: image"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../shell/index.html" class="navigation navigation-next " aria-label="Next page: shell"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
